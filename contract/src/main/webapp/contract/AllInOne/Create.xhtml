<ui:composition template="/WEB-INF/contractTemplate.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="content">
        <h:form id="ContractsTableCreateForm">
            <p:growl id="growl-sticky" for="sticky-key" showDetail="true" sticky="true" />

            <p:messages id="grid" showDetail="true" closable="true" />

            <p:panel header="ContractsTable - Create New Contract">
                <p:toolbar>
                    <p:toolbarGroup>
                        <p:commandButton value="Save" icon="pi pi-check"
                                         action="#{contractsController.save}"
                                         update="@form"
                                         styleClass="p-button-success" />
                        <p:commandButton value="Cancel" icon="pi pi-times"
                                         actionListener="#{contractsController.cancelCreate}"
                                         action="List.xhtml?faces-redirect=true"
                                         styleClass="p-button-secondary" />
                        <p:commandButton value="Discard" icon="pi pi-trash"
                                         actionListener="#{contractsController.discard}"
                                         action="List.xhtml?faces-redirect=true"
                                         styleClass="p-button-danger" />
                    </p:toolbarGroup>
                </p:toolbar>
            </p:panel>
            <p:panel header="Contract Information" styleClass="mb-3 p-3" >
                <div class="ui-fluid formgrid grid" style="margin: 2% 4%">

                    <!-- Contract Title -->
                    <div class="field col-12">
                        <h:outputLabel for="contractTitle" value="Contract Title:" />
                        <p:inputText id="contractTitle"
                                     required="true"
                                     value="#{contractsController.contractTitle}"
                                     styleClass="w-full" />
                    </div>

                    <!-- Reference Number -->
                    <div class="field col-12">
                        <h:outputLabel for="referenceNumber" value="Reference Number:" />
                        <p:inputText id="referenceNumber"
                                     value="#{contractsController.referenceNumber}"
                                     styleClass="w-full" />
                    </div>

                    <!-- Toggle between Select or Create Contract Type -->
                    <div class="field col-12">
                        <h:outputLabel for="ContractsTableCreateForm:toggleType"
                                       value="Select or Create Contract Type:"
                                       style="display: block; margin-bottom: 0.5rem;" />

                        <div style="display: flex; gap: 2rem; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <p:radioButton for="ContractsTableCreateForm:toggleType" itemIndex="0" />
                                <span>Select Existing</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <p:radioButton for="ContractsTableCreateForm:toggleType" itemIndex="1" />
                                <span>Create New</span>
                            </div>
                        </div>

                        <p:selectOneRadio id="toggleType"
                                          value="#{contractsController.createNewType}"
                                          layout="custom"
                                          style="display: none;">
                            <f:selectItem itemLabel="Select Existing" itemValue="false" />
                            <f:selectItem itemLabel="Create New" itemValue="true" />
                            <p:ajax update="contractTypeWrapper" />
                        </p:selectOneRadio>
                    </div>

                    <!-- Contract Type Section -->
                    <h:panelGroup id="contractTypeWrapper">
                        <h:panelGroup rendered="#{!contractsController.createNewType}">
                            <div class="field col-12">
                                <h:outputLabel for="contractTypeId" value="Contract Type:" />
                                <p:selectOneMenu id="contractTypeId"
                                                 value="#{contractsController.contractTypeId}"
                                                 styleClass="w-full">
                                    <f:selectItem itemLabel="Select Contract Type" itemValue="" noSelectionOption="true" />
                                    <f:selectItems value="#{contractTypesTableController.items}"
                                                   var="type"
                                                   itemLabel="#{type.typeName}"
                                                   itemValue="#{type}" />
                                </p:selectOneMenu>
                            </div>
                        </h:panelGroup>

                        <h:panelGroup rendered="#{contractsController.createNewType}">
                            <p:panel header="Create New Contract Type" styleClass="mb-3 p-3">
                                <div class="ui-fluid formgrid grid" style="margin: 2% 4%">
                                    <div class="field col-12">
                                        <h:outputLabel for="typeName" value="Type Name:" />
                                        <p:inputText id="typeName" value="#{contractsController.typeName}" requiredMessage="Type Name is required" />
                                    </div>
                                    <div class="field col-12">
                                        <h:outputLabel for="description1" value="Description:" />
                                        <p:inputTextarea id="description1" value="#{contractsController.typeDescription}" rows="4" autoResize="true" />
                                    </div>
                                    <div class="field col-12">
                                        <h:outputLabel for="contractSide" value="Contract Side:" />
                                        <p:inputText id="contractSide" value="#{contractsController.contractSide}" requiredMessage="Contract Side is required" />
                                    </div>
                                </div>
                            </p:panel>
                        </h:panelGroup>
                    </h:panelGroup>


                    <!-- Toggle between Select or Create Contract Status -->
                    <div class="field col-12">
                        <h:outputLabel for="ContractsTableCreateForm:toggleStatus"
                                       value="Select or Create Contract Status:"
                                       style="display: block; margin-bottom: 0.5rem;" />

                        <div style="display: flex; gap: 2rem; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <p:radioButton for="ContractsTableCreateForm:toggleStatus" itemIndex="0" />
                                <span>Select Existing</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <p:radioButton for="ContractsTableCreateForm:toggleStatus" itemIndex="1" />
                                <span>Create New</span>
                            </div>
                        </div>

                        <p:selectOneRadio id="toggleStatus"
                                          value="#{contractsController.createNewStatus}"
                                          layout="custom"
                                          style="display: none;">
                            <f:selectItem itemLabel="Select Existing" itemValue="false" />
                            <f:selectItem itemLabel="Create New" itemValue="true" />
                            <p:ajax update="contractStatusWrapper" />
                        </p:selectOneRadio>
                    </div>

                    <!-- Contract Status Section -->
                    <h:panelGroup id="contractStatusWrapper">
                        <h:panelGroup rendered="#{!contractsController.createNewStatus}">
                            <div class="field col-12">
                                <h:outputLabel for="contractStatusId" value="Contract Status:" />
                                <p:selectOneMenu id="contractStatusId"
                                                 value="#{contractsController.contractStatusId}"
                                                 styleClass="w-full">
                                    <f:selectItem itemLabel="Select Contract Status" itemValue="" noSelectionOption="true" />
                                    <f:selectItems value="#{contractStatusesTableController.items}"
                                                   var="status"
                                                   itemLabel="#{status.statusName}"
                                                   itemValue="#{status}"
                                                   itemDescription="#{status.description}" />
                                </p:selectOneMenu>
                            </div>
                        </h:panelGroup>

                        <h:panelGroup rendered="#{contractsController.createNewStatus}">
                            <p:panel header="Create New Contract Status" styleClass="mb-3 p-3">
                                <div class="ui-fluid formgrid grid" style="margin: 2% 4%">
                                    <div class="field col-12">
                                        <h:outputLabel for="statusName" value="Status Name:" />
                                        <p:inputText id="statusName" value="#{contractsController.statusName}" label="Status Name" />
                                    </div>
                                    <div class="field col-12">
                                        <h:outputLabel for="statusDescription" value="Description:" />
                                        <p:inputTextarea id="statusDescription" value="#{contractsController.statusDescription}" rows="4" autoResize="true" />
                                    </div>
                                </div>
                            </p:panel>
                        </h:panelGroup>
                    </h:panelGroup>

                    <!-- Description Scope -->
                    <div class="field col-12">
                        <h:outputLabel for="descriptionScope" value="Description Scope:" />
                        <p:inputTextarea id="descriptionScope"
                                         value="#{contractsController.descriptionScope}"
                                         autoResize="false"
                                         rows="3"
                                         styleClass="w-full" />
                    </div>

                    <!-- Effective Date -->
                    <div class="field col-12 md:col-4">
                        <h:outputLabel for="effectiveDate" value="Effective Date:" />
                        <p:datePicker id="effectiveDate"
                                      value="#{contractsController.effectiveDate}"
                                      pattern="yyyy-MM-dd"
                                      placeholder="Select date"
                                      showIcon="true"
                                      monthNavigator="true"
                                      yearNavigator="true"
                                      styleClass="w-full">
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </p:datePicker>
                    </div>

                    <!-- Initial Expiry Date -->
                    <div class="field col-12 md:col-4">
                        <h:outputLabel for="initialExpiryDate" value="Initial Expiry Date:" />
                        <p:datePicker id="initialExpiryDate"
                                      value="#{contractsController.initialExpiryDate}"
                                      pattern="yyyy-MM-dd"
                                      placeholder="Select date"
                                      showIcon="true"
                                      monthNavigator="true"
                                      yearNavigator="true"
                                      styleClass="w-full">
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </p:datePicker>
                    </div>

                    <!-- Current Expiry Date -->
                    <div class="field col-12 md:col-4">
                        <h:outputLabel for="currentExpiryDate" value="Current Expiry Date:" />
                        <p:datePicker id="currentExpiryDate"
                                      value="#{contractsController.currentExpiryDate}"
                                      pattern="yyyy-MM-dd"
                                      placeholder="Select date"
                                      showIcon="true"
                                      monthNavigator="true"
                                      yearNavigator="true"
                                      styleClass="w-full">
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </p:datePicker>
                    </div>

                    <!-- Notice Period -->
                    <div class="field col-12 md:col-4">
                        <h:outputLabel for="noticePeriod" value="Notice Period Days:" />
                        <p:inputNumber id="noticePeriod"
                                       value="#{contractsController.noticePeriodDaysForTermination}"
                                       styleClass="w-full"
                                       minValue="0" />
                    </div>

                    <!-- Auto Renewal -->
                    <div class="field col-12 md:col-4" style="margin-top: 2%">
                        <h:outputLabel for="autoRenewal" value="Auto Renewal Enabled:"  style="margin-right: 1%"/>
                        <p:selectBooleanCheckbox id="autoRenewal"
                                                 value="#{contractsController.autoRenewalEnabled}" />
                    </div>

                    <!-- Renewal Term -->
                    <div class="field col-12 md:col-4">
                        <h:outputLabel for="renewalTerm" value="Renewal Term Months:" />
                        <p:inputNumber id="renewalTerm"
                                       value="#{contractsController.renewalTermMonths}"
                                       styleClass="w-full"
                                       minValue="0" />
                    </div>

                    <!-- Contract Value -->
                    <div class="field col-12">
                        <h:outputLabel for="contractValue" value="Contract Value:" />
                        <p:inputNumber id="contractValue"
                                       value="#{contractsController.contractValue}"
                                       styleClass="w-full" />
                    </div>

                    <!-- Currency Code -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="currencyCode" value="Currency Code:" />
                        <p:selectOneMenu id="currencyCode"
                                         value="#{contractsController.currencyCode}"
                                         styleClass="w-full">
                            <f:selectItem itemLabel="Select" itemValue="" noSelectionOption="true" />
                            <f:selectItem itemLabel="ETB" itemValue="ETB" />
                            <f:selectItem itemLabel="USD" itemValue="USD" />
                            <f:selectItem itemLabel="EUR" itemValue="EUR" />
                        </p:selectOneMenu>
                    </div>

                    <!-- Governing Law -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="governingLaw" value="Governing Law Jurisdiction:" />
                        <p:inputText id="governingLaw"
                                     value="#{contractsController.governingLawJurisdiction}"
                                     styleClass="w-full" />
                    </div>

                    <!-- Parent Contract Id -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="parentContractId" value="Parent Contract Id:" />
                        <p:inputText id="parentContractId"
                                     value="#{contractsController.parentContractId}"
                                     styleClass="w-full" />
                    </div>

                    <!-- Created By User Id -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="createdByUserId" value="Created By User Id:" />
                        <p:inputText id="createdByUserId"
                                     value="#{contractsController.createdByUserId}"
                                     styleClass="w-full" />
                    </div>

                    <!-- Created At -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="createdAt" value="Created At:"/>
                        <p:datePicker id="createdAt"
                                      value="#{contractsController.createdAt}"
                                      pattern="yyyy-MM-dd"
                                      placeholder="Select current created date"
                                      showIcon="true"
                                      monthNavigator="true"
                                      yearNavigator="true"
                                      style="flex: 1;" >
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </p:datePicker>
                    </div>

                    <!-- Updated By User Id -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="updatedByUserId" value="Updated By User Id:" />
                        <p:inputText id="updatedByUserId"
                                     value="#{contractsController.updatedByUserId}"
                                     styleClass="w-full" />
                    </div>

                    <!-- Updated At -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="updatedAt" value="Updated At:"/>
                        <p:datePicker id="updatedAt"
                                      value="#{contractsController.updatedAt}"
                                      pattern="yyyy-MM-dd"
                                      placeholder="Select current updated date"
                                      showIcon="true"
                                      monthNavigator="true"
                                      yearNavigator="true"
                                      style="flex: 1;" >
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </p:datePicker>
                    </div>

                    <!-- Contract Identity Side -->
                    <div class="field col-12">
                        <h:outputLabel for="contractIdentitySide" value="Contract Identity Side:" />
                        <p:inputText id="contractIdentitySide"
                                     value="#{contractsController.contractIdentitySide}"
                                     styleClass="w-full" />
                    </div>


                </div>
            <p:spacer height="20"/>

            <p:panel header="Dates &amp; Fees" style="margin: 2% 4%">
                <div class="ui-fluid formgrid grid" style="margin: 2% 4%">


                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="initialStartDate" value="Initial Start Date:"/>
                        <p:datePicker id="initialStartDate"
                                      value="#{contractsController.initalStartDate}"
                                      pattern="yyyy-MM-dd"
                                      placeholder="Select current expiry date"
                                      showIcon="true"
                                      monthNavigator="true"
                                      yearNavigator="true"
                                      style="flex: 1;" >
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </p:datePicker>
                    </div>

                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="endStartDate" value="End Start Date:"/>
                        <p:datePicker id="endStartDate"
                                      value="#{contractsController.endStartDate}"
                                      pattern="yyyy-MM-dd"
                                      placeholder="Select current expiry date"
                                      showIcon="true"
                                      monthNavigator="true"
                                      yearNavigator="true"
                                      style="flex: 1;" >
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </p:datePicker>
                    </div>

                    <div class="field col-12 md:col-3">
                        <h:outputLabel for="cancellationFee" value="Cancellation Fee:"/>
                        <p:inputNumber id="cancellationFee" value="#{contractsController.cancellationFee}" style="width: 50%"/>
                    </div>

                    <div class="field col-12 md:col-3">
                        <h:outputLabel for="retinageAmount" value="Retinage Amount:"/>
                        <p:inputNumber id="retinageAmount" value="#{contractsController.retinageAmount}" style="width: 50%"/>
                    </div>

                    <div class="field col-12 md:col-3">
                        <h:outputLabel for="taxRate" value="Tax Rate:"/>
                        <p:inputNumber id="taxRate" value="#{contractsController.taxRate}" style="width: 50%"/>
                    </div>

                    <div class="field col-12 md:col-3">
                        <h:outputLabel for="contractCurrency" value="Tax Rate:"/>
                        <p:inputNumber id="contractCurrency" value="#{contractsController.contractCurrency}" style="width: 50%"/>
                    </div>
                </div>
            </p:panel>

            <p:spacer height="20"/>

            <p:panel header="Addresses" style="margin: 2% 4%">
                <div class="ui-fluid formgrid grid" style="margin: 2% 4%">


                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="addressCustomer1" value="Address Number Customer 1:"/>
                        <p:inputNumber id="addressCustomer1" value="#{contractsController.addressNumberCustomer1}" style="width: 50%"/>
                    </div>

                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="addressCustomer2" value="Address Number Customer 2:"/>
                        <p:inputNumber id="addressCustomer2" value="#{contractsController.addressNumberCustomer2}" style="width: 50%"/>
                    </div>

                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="addressCustomer3" value="Address Number Customer 3:"/>
                        <p:inputNumber id="addressCustomer3" value="#{contractsController.addressNumberCustomer3}" style="width: 50%"/>
                    </div>

                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="addressRep1" value="Address Number Rep 1:"/>
                        <p:inputNumber id="addressRep1" value="#{contractsController.addressNumberRep1}" style="width: 50%"/>
                    </div>

                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="addressRep2" value="Address Number Rep 2:"/>
                        <p:inputNumber id="addressRep2" value="#{contractsController.addressNumberRep2}" style="width: 50%"/>
                    </div>

                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="addressRep3" value="Address Number Rep 3:"/>
                        <p:inputNumber id="addressRep3" value="#{contractsController.addressNumberRep3}" style="width: 50%"/>
                    </div>

                    <div class="field col-12">
                        <h:outputLabel for="addressRep4" value="Address Number Rep 4:"/>
                        <p:inputNumber id="addressRep4" value="#{contractsController.addressNumberRep4}" style="width: 50%"/>
                    </div>

                    <div class="field col-12 md:col-4">
                        <h:outputLabel for="addressPrepared" value="Prepared By:"/>
                        <p:inputNumber id="addressPrepared" value="#{contractsController.addressNumberPrepared}" style="width: 50%"/>
                    </div>

                    <div class="field col-12 md:col-4">
                        <h:outputLabel for="addressApproved" value="Approved By:"/>
                        <p:inputNumber id="addressApproved" value="#{contractsController.addressNumberAproved}" style="width: 50%"/>
                    </div>

                    <div class="field col-12 md:col-4">
                        <h:outputLabel for="addressChecked" value="Checked By:"/>
                        <p:inputNumber id="addressChecked" value="#{contractsController.addressNumberChecked}" style="width: 50%"/>
                    </div>
                </div>
            </p:panel>
            </p:panel>

            <p:panel header="Create Contract Item">
                <div class="ui-fluid formgrid grid" style="margin: 2% 4%">


                    <div class="field col-12">
                        <h:outputLabel for="amountQuantity" value="Amount Quantity:"/>
                        <p:inputText id="amountQuantity" value="#{contractsController.amountQuantity}" label="Amount Quantity"/>
                    </div>

                    <div class="field col-12 md:col-3">
                        <h:outputLabel for="itemsTable" value="Items Table:"/>
                        <p:inputNumber id="itemsTable" value="#{contractsController.itemsTable}" label="Items Table"/>
                    </div>

                    <div class="field col-12 md:col-3">
                        <h:outputLabel for="unitOfMeasure" value="Unit Of Measure:"/>
                        <p:inputNumber id="unitOfMeasure" value="#{contractsController.unitOfMeasure}" label="Unit Of Measure"/>
                    </div>

                    <div class="field col-12 md:col-3">
                        <h:outputLabel for="unitAmount" value="Unit Amount:"/>
                        <p:inputText id="unitAmount" value="#{contractsController.unitAmount}" label="Unit Amount"/>
                    </div>

                    <div class="field col-12 md:col-3">
                        <h:outputLabel for="extendedAmount" value="Extended Amount:"/>
                        <p:inputText id="extendedAmount" value="#{contractsController.extendedAmount}" label="Extended Amount"/>
                    </div>

                    <!--                                <div class="field col-12">-->
                    <!--                                    <h:outputLabel for="usersId" value="Users ID:"/>-->
                    <!--                                    <p:inputText id="usersId" value="#{contractsController.usersId}" label="Users ID"/>-->
                    <!--                                </div>-->

                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="dateEntered" value="Date Entered:"/>
                        <p:datePicker id="dateEntered"
                                      value="#{contractsController.dateEnered}"
                                      pattern="yyyy-MM-dd"
                                      placeholder="Select date"
                                      showIcon="true"
                                      monthNavigator="true"
                                      yearNavigator="true"
                                      styleClass="w-full">
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </p:datePicker>
                    </div>

                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="dateUpdated" value="Date Updated:"/>
                        <p:datePicker id="dateUpdated"
                                      value="#{contractsController.dateUpdated}"
                                      pattern="yyyy-MM-dd"
                                      placeholder="Select date"
                                      showIcon="true"
                                      monthNavigator="true"
                                      yearNavigator="true"
                                      styleClass="w-full">
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </p:datePicker>
                    </div>

                </div>

            </p:panel>
<p:separator/>
            <p:panel header="Create Contract Party Role">

                <div class="ui-fluid formgrid grid" style="margin: 2% 4%">

                    <!-- Primary Counterparty -->
                    <div class="field col-12">
                        <h:outputLabel for="isPrimaryCounterparty" value="Primary Counterparty:" style="margin-right: 2%" />
                        <p:selectBooleanCheckbox id="isPrimaryCounterparty" value="#{contractsController.primaryCounterParty}" />
                    </div>

                    <!-- Party ID -->
                    <!-- Toggle between Select or Create -->
                    <div class="field col-12">
                        <h:outputLabel for="ContractsTableCreateForm:toggleParty"
                                       value="Select or Create Contract Party Type:"
                                       style="display: block; margin-bottom: 0.5rem;" />

                        <div style="display: flex; gap: 2rem; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <p:radioButton for="ContractsTableCreateForm:toggleParty" itemIndex="0" />
                                <span>Select Existing</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <p:radioButton for="ContractsTableCreateForm:toggleParty" itemIndex="1" />
                                <span>Create New</span>
                            </div>
                        </div>

                        <p:selectOneRadio id="toggleParty"
                                          value="#{contractsController.createNewParty}"
                                          layout="custom"
                                          style="display: none;">
                            <f:selectItem itemLabel="Select Existing" itemValue="false" />
                            <f:selectItem itemLabel="Create New" itemValue="true" />
                            <p:ajax update="contractPartyWrapper" />
                        </p:selectOneRadio>
                    </div>

                    <!-- Contract Party Section -->
                    <h:panelGroup id="contractPartyWrapper">
                    <!-- Existing Party Dropdown -->
                    <h:panelGroup rendered="#{!contractsController.createNewParty}">
                        <div class="field col-12">
                            <p:outputLabel for="partyId1" value="Party ID:" />
                            <p:selectOneMenu id="partyId1" value="#{contractsController.partyId}">
                                <f:selectItem itemLabel="Select Party" itemValue="#{null}" />
                                <f:selectItems value="#{contractPartiesTableController.items}" var="party"
                                               itemLabel="#{party.legalName}" itemValue="#{type}" />
                                <p:ajax listener="#{contractPartyRolesTableController.onContractOrPartyChange}" update="roleInContractId1" />
                            </p:selectOneMenu>
                        </div>
                    </h:panelGroup>

                    <!-- Create New Contract Party Type Form -->
                    <h:panelGroup rendered="#{contractsController.createNewParty}">

                    <p:panel header="Party Details Form" styleClass="mb-3 p-3" >
                        <div class="ui-fluid formgrid grid" style="margin: 2% 4%">

                            <!-- Legal Name -->
                            <div class="field col-12">
                                <p:outputLabel for="legalName1" value="Legal Name:" />
                                <p:inputTextarea id="legalName1" value="#{contractsController.legalName}" autoResize="true"/>
                            </div>

                            <!-- Short Name -->
                            <div class="field col-12 md:col-6">
                                <p:outputLabel for="shortName" value="Short Name:" />
                                <p:inputText id="shortName" value="#{contractsController.shortName}" maxlength="100" />
                            </div>

                            <!--Party Type-->
                            <!-- Toggle between Select or Create -->
                            <div class="field col-12">
                                <h:outputLabel for="ContractsTableCreateForm:togglePartyType"
                                               value="Select or Create Contract Party Type:"
                                               style="display: block; margin-bottom: 0.5rem;" />

                                <div style="display: flex; gap: 2rem; align-items: center;">
                                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                                        <p:radioButton for="ContractsTableCreateForm:togglePartyType" itemIndex="0" />
                                        <span>Select Existing</span>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                                        <p:radioButton for="ContractsTableCreateForm:togglePartyType" itemIndex="1" />
                                        <span>Create New</span>
                                    </div>
                                </div>

                                <p:selectOneRadio id="togglePartyType"
                                                  value="#{contractsController.createNewPartyType}"
                                                  layout="custom"
                                                  style="display: none;">
                                    <f:selectItem itemLabel="Select Existing" itemValue="false" />
                                    <f:selectItem itemLabel="Create New" itemValue="true" />
                                    <p:ajax update="contractPartyTypeWrapper" />
                                </p:selectOneRadio>
                            </div>

                            <!-- Contract Party Section -->
                            <h:panelGroup id="contractPartyTypeWrapper">
                            <!-- Existing Contract Type Dropdown -->
                            <h:panelGroup rendered="#{!contractsController.createNewPartyType}">
                                <div class="field col-12">
                                    <p:outputLabel for="partyType" value="Party Type:" />
                                    <p:selectOneMenu id="partyType" value="#{contractsController.partyTypeId}">
                                        <f:selectItem itemLabel="Select Party Type" itemValue="" />
                                        <f:selectItems value="#{partyTypesTableController.items}" var="partyType"
                                                       itemLabel="#{partyType.typeName}"
                                                       itemValue="#{partyType}" />
                                    </p:selectOneMenu>
                                </div>
                            </h:panelGroup>

                            <!-- Create New Contract Party Type Form -->
                            <h:panelGroup rendered="#{contractsController.createNewPartyType}">
                                <p:panel header="Create New Party Type" styleClass="mb-3 p-3">

                                    <div class="ui-fluid formgrid grid" style="margin: 2% 4%">
                                        <!-- Type Name -->
                                        <div class="field col-12">
                                            <h:outputLabel for="partyTypeName" value="Type Name:" />
                                            <p:inputText id="partyTypeName" value="#{contractsController.typeName}"
                                                         label="Party Type Name" />
                                        </div>

                                    </div>
                                </p:panel>
                            </h:panelGroup>
                            </h:panelGroup>
                            <!-- Registration Number -->
                            <div class="field col-12">
                                <p:outputLabel for="registrationNumber" value="Registration Number:" />
                                <p:inputText id="registrationNumber" value="#{contractsController.registrationNumber}" maxlength="100" />
                            </div>

                            <!-- Address Number AB -->
                            <div class="field col-12 md:col-6">
                                <p:outputLabel for="addressNumber" value="Address Number AB:" />
                                <p:inputText id="addressNumber" value="#{contractsController.addressNumberAb}" />
                            </div>

                        </div>
                    </p:panel>
                    </h:panelGroup>
                    </h:panelGroup>

                    <!-- Role In Contract ID -->
                    <!-- Toggle between Select or Create -->
                    <div class="field col-12">
                        <h:outputLabel for="ContractsTableCreateForm:roleInContractId"
                                       value="Select or Create Contract Party Role:"
                                       style="display: block; margin-bottom: 0.5rem;" />

                        <div style="display: flex; gap: 2rem; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <p:radioButton for="ContractsTableCreateForm:roleInContractId" itemIndex="0" />
                                <span>Select Existing</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <p:radioButton for="ContractsTableCreateForm:roleInContractId" itemIndex="1" />
                                <span>Create New</span>
                            </div>
                        </div>

                        <p:selectOneRadio id="roleInContractId"
                                          value="#{contractsController.createNewPartyRoleType}"
                                          layout="custom"
                                          style="display: none;">
                            <f:selectItem itemLabel="Select Existing" itemValue="false" />
                            <f:selectItem itemLabel="Create New" itemValue="true" />
                            <p:ajax update="contractPartyRoleWrapper" />
                        </p:selectOneRadio>
                    </div>



                    <h:panelGroup id="contractPartyRoleWrapper">
                    <!-- Existing Party Role Dropdown -->
                    <h:panelGroup rendered="#{!contractsController.createNewPartyRoleType}" >
                        <div class="field col-12">
                            <p:outputLabel for="roleInContractId1" value="Role In Contract ID:" />
                            <p:selectOneMenu id="roleInContractId1" value="#{contractsController.roleInContractId}">
                                <f:selectItem itemLabel="Select Role Type" itemValue="#{null}" />
                                <f:selectItems value="#{partyRoleTypesTableController.items}" var="role"
                                               itemLabel="#{role.roleName}" itemValue="#{type}" />
                            </p:selectOneMenu>
                        </div>
                    </h:panelGroup>

                    <!-- Create New Contract Party Role Form -->
                    <h:panelGroup rendered="#{contractsController.createNewPartyRoleType}" class="field col-12">
                        <p:panel header="Create New Party Role Type">
                            <div class="ui-fluid formgrid grid" style="margin: 2% 4%">

                                <!-- Role Name -->
                                <div class="field col-12">
                                    <h:outputLabel for="roleName" value="Role Name:" />
                                    <p:inputText id="roleName" value="#{contractsController.roleName}"
                                                 label="Role Name">
                                        <f:validateLength minimum="1" maximum="100"/>
                                    </p:inputText>

                                </div>

                            </div>
                        </p:panel>
                    </h:panelGroup>
                    </h:panelGroup>
                </div>
            </p:panel>
            <p:separator/>
            <p:panel header="Create Milestone">
                <div class="ui-fluid formgrid grid" style="margin: 2% 4%">

                    <!-- Milestone Name -->
                    <div class="field col-12">
                        <p:outputLabel for="milestoneName1" value="Milestone Name:" />
                        <p:inputText id="milestoneName1" value="#{contractsController.milestoneName}" label="Milestone Name" />
                    </div>

                    <!-- Description -->
                    <div class="field col-12">
                        <p:outputLabel for="milestoneDescription" value="Description:" style="margin-top:10px;" />
                        <p:inputTextarea id="milestoneDescription" value="#{contractsController.milestoneDescription}" rows="4" autoResize="true" />
                    </div>

                    <!-- Due Date -->
                    <div class="field col-12 md:col-6">
                        <p:outputLabel for="dueDate" value="Due Date:" style="margin-top:10px;" />
                        <p:datePicker id="dueDate"
                                      value="#{contractsController.dueDate}"
                                      pattern="yyyy-MM-dd"
                                      placeholder="Select date"
                                      showIcon="true"
                                      monthNavigator="true"
                                      yearNavigator="true"
                                      styleClass="w-full">
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </p:datePicker>
                    </div>

                    <!-- Assigned Contact -->
                    <div class="field col-12 md:col-6">
                        <p:outputLabel for="assignedContactId" value="Assigned Contact:" style="margin-top:10px;" />
                        <p:inputNumber id="assignedContactId" value="#{contractsController.assignedContactId}" />
                    </div>

                    <!-- Reminder Lead Days -->
                    <div class="field col-12 md:col-6">
                        <p:outputLabel for="reminderLeadDays" value="Reminder Lead Days:" style="margin-top:10px;" />
                        <p:inputNumber id="reminderLeadDays" value="#{contractsController.reminderLeadDays}" />
                    </div>

                    <!-- Completed Date -->
                    <div class="field col-12 md:col-6">
                        <p:outputLabel for="completedDate" value="Completed Date:" style="margin-top:10px;" />
                        <p:datePicker id="completedDate"
                                      value="#{contractsController.completedDate}"
                                      pattern="yyyy-MM-dd"
                                      placeholder="Select date"
                                      showIcon="true"
                                      monthNavigator="true"
                                      yearNavigator="true"
                                      styleClass="w-full">
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </p:datePicker>
                    </div>

<!--                    &lt;!&ndash; Users Id &ndash;&gt;-->
<!--                    <div class="field col-12 md:col-6">-->
<!--                        <p:outputLabel for="usersId" value="User ID:" style="margin-top:10px;" />-->
<!--                        <p:inputText id="usersId" value="#{contractsController.usersId}" />-->
<!--                    </div>-->

                    <!-- Status Id -->
                    <!-- Toggle between Select or Create -->
                    <div class="field col-12">
                        <h:outputLabel for="ContractsTableCreateForm:statusId"
                                       value="Select or Create Milestone Status:"
                                       style="display: block; margin-bottom: 0.5rem;" />

                        <div style="display: flex; gap: 2rem; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <p:radioButton for="ContractsTableCreateForm:statusId" itemIndex="0" />
                                <span>Select Existing</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <p:radioButton for="ContractsTableCreateForm:statusId" itemIndex="1" />
                                <span>Create New</span>
                            </div>
                        </div>

                        <p:selectOneRadio id="statusId"
                                          value="#{contractsController.createNewMilestoneStatus}"
                                          layout="custom"
                                          style="display: none;">
                            <f:selectItem itemLabel="Select Existing" itemValue="false" />
                            <f:selectItem itemLabel="Create New" itemValue="true" />
                            <p:ajax update="milestoneStatusWrapper" />
                        </p:selectOneRadio>
                    </div>

                    <h:panelGroup id="milestoneStatusWrapper">
                    <!-- Existing Milestone Status Dropdown -->
                    <h:panelGroup rendered="#{!contractsController.createNewMilestoneStatus}" >
                        <div class="field col-12">
                            <p:outputLabel for="statusId1" value="Status ID:" style="margin-top:10px;" />
                            <p:selectOneMenu id="statusId1" value="#{contractsController.statusId}">
                                <f:selectItem itemLabel="Select Party Type" itemValue="" />
                                <f:selectItems value="#{milestoneStatusesTableController.items}" var="status"
                                               itemLabel="#{status.statusName}"
                                               itemValue="#{status}" />
                            </p:selectOneMenu>
                        </div>
                    </h:panelGroup>

                    <!-- Create Milestone Status Form -->
                    <h:panelGroup rendered="#{contractsController.createNewMilestoneStatus}" class="field col-12">
                        <p:panel header="Create New Milestone Status" styleClass="mb-3 p-3">

                            <div class="ui-fluid formgrid grid" style="margin: 2% 4%">
                                <!-- Status Name -->
                                <div class="field col-12">

                                    <h:outputLabel for="milestoneStatusName" value="Status Name:" />
                                    <p:inputText id="milestoneStatusName" value="#{contractsController.milestoneStatusName}"
                                                 label="Status Name" />

                                </div>
                            </div>
                        </p:panel>
                    </h:panelGroup>
                    </h:panelGroup>

                </div>
            </p:panel>
            <p:separator/>
            <p:panel header="Create New Issue / Defect">

                <div class="ui-fluid formgrid grid" style="margin: 2% 4%">

                    <!--Issue Category -->
                    <div class="field col-12">
                        <h:outputLabel for="issueCategory" value="Issue Category:" />
                        <p:inputText id="issueCategory" value="#{contractsController.issueCategory}" label="Issue Category" />
                    </div>

                    <!-- Issue Description -->
                    <div class="field col-12">
                        <h:outputLabel for="issueDescription1" value="Issue Description:" />
                        <p:inputTextarea id="issueDescription1" value="#{contractsController.issueDescription}" rows="4" cols="30" label="Issue Description" />
                    </div>

<!--                    &lt;!&ndash; Reported By Party Id &ndash;&gt;-->
<!--                    <div class="field col-12 md:col-6">-->
<!--                        <h:outputLabel for="reportedByPartyId" value="Reported By Party ID:" />-->
<!--                        <p:selectOneMenu id="reportedByPartyId"-->
<!--                                         value="#{issuesDefectsTableController.selected.reportedByPartyId}">-->
<!--                            <f:selectItem itemLabel="&#45;&#45; Select reported By Party &#45;&#45;" itemValue="#{reportedByPartyId}" />-->
<!--                            <f:selectItems value="#{contractPartiesTableController.items}"-->
<!--                                           var="party"-->
<!--                                           itemValue="#{party}"-->
<!--                                           itemLabel="#{party.legalName}" />-->
<!--                        </p:selectOneMenu>-->
<!--                    </div>-->

                    <!-- Reported Date -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="reportedDate" value="Reported Date:" />
                        <p:datePicker id="reportedDate"
                                      value="#{contractsController.reportedDate}"
                                      pattern="yyyy-MM-dd"
                                      placeholder="Select date"
                                      showIcon="true"
                                      monthNavigator="true"
                                      yearNavigator="true"
                                      styleClass="w-full">
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </p:datePicker>
                    </div>

                    <!-- Severity -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="severity" value="Severity:" />
                        <p:selectOneMenu id="severity"
                                         value="#{contractsController.severity}">
                            <f:selectItem itemLabel="-- Select Severity --" itemValue="#{null}" />
                            <f:selectItems value="#{issuesDefectsTableController.severityItems}"
                                           var="severity"
                                           itemValue="#{severity}"
                                           itemLabel="#{severity}" />
                        </p:selectOneMenu>
                    </div>

                    <!-- Status -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="status" value="Status:" />
                        <p:selectOneMenu id="status"
                                         value="#{contractsController.status}">
                            <f:selectItem itemLabel="-- Select Status --" itemValue="#{null}" />
                            <f:selectItems value="#{issuesDefectsTableController.statusItems}"
                                           var="status"
                                           itemValue="#{status}"
                                           itemLabel="#{status}" />
                        </p:selectOneMenu>
                    </div>

                    <!-- Impact -->
                    <div class="field col-12">
                        <h:outputLabel for="impact1" value="Impact:" />
                        <p:inputText id="impact1" value="#{contractsController.impact}" label="Impact" />
                    </div>

                    <!-- Assigned To User Id -->
                    <div class="field col-12">
                        <h:outputLabel for="assignedToUserId" value="Assigned To User ID:" />
                        <p:inputNumber id="assignedToUserId" value="#{contractsController.assignedToUserId}" required="false" label="Assigned To User ID" />
                    </div>

                    <!-- Resolution Details -->
                    <div class="field col-12">
                        <h:outputLabel for="resolutionDetails1" value="Resolution Details:" />
                        <p:inputTextarea id="resolutionDetails1" value="#{contractsController.resolutionDetails}" rows="3" cols="30" label="Resolution Details" />
                    </div>

                    <!-- Resolution Date -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="resolutionDate" value="Resolution Date:" />
                        <p:datePicker id="resolutionDate"
                                      value="#{contractsController.resolutionDate}"
                                      pattern="yyyy-MM-dd"
                                      placeholder="Select date"
                                      showIcon="true"
                                      monthNavigator="true"
                                      yearNavigator="true"
                                      styleClass="w-full">
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </p:datePicker>
                    </div>

                    <!-- Closure Date -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="closureDate" value="Closure Date:" />
                        <p:datePicker id="closureDate"
                                      value="#{contractsController.closureDate}"
                                      pattern="yyyy-MM-dd"
                                      placeholder="Select date"
                                      showIcon="true"
                                      monthNavigator="true"
                                      yearNavigator="true"
                                      styleClass="w-full">
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </p:datePicker>
                    </div>

                    <!-- Client Acceptance Document Id -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="clientAcceptanceDocId" value="Client Acceptance Doc ID:" />
                        <p:inputNumber id="clientAcceptanceDocId" value="#{contractsController.clientAcceptanceDocId}"/>

                    </div>

                    <!-- Warranty Id -->
                    <!-- Toggle between Select or Create -->
                    <div class="field col-12">
                        <h:outputLabel for="ContractsTableCreateForm:warrantyId"
                                       value="Select or Create Warranty Id:"
                                       style="display: block; margin-bottom: 0.5rem;" />

                        <div style="display: flex; gap: 2rem; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <p:radioButton for="ContractsTableCreateForm:warrantyId" itemIndex="0" />
                                <span>Select Existing</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <p:radioButton for="ContractsTableCreateForm:warrantyId" itemIndex="1" />
                                <span>Create New</span>
                            </div>
                        </div>

                        <p:selectOneRadio id="warrantyId"
                                          value="#{contractsController.createNewWarrantyId}"
                                          layout="custom"
                                          style="display: none;">
                            <f:selectItem itemLabel="Select Existing" itemValue="false" />
                            <f:selectItem itemLabel="Create New" itemValue="true" />
                            <p:ajax update="warrantyWrapper" />
                        </p:selectOneRadio>
                    </div>

                    <h:panelGroup id="warrantyWrapper">
                    <!-- Existing Milestone Status Dropdown -->
                    <h:panelGroup rendered="#{!contractsController.createNewWarrantyId}" >
                        <div class="field col-12">
                            <h:outputLabel for="warrantyId1" value="Warranty ID:" />
                            <p:selectOneMenu id="warrantyId1" value="#{contractsController.warrantyId}">
                                <f:selectItem itemLabel="Select Party Type" itemValue="" />
                                <f:selectItems value="#{warrantiesTableController.items}" var="warranty"
                                               itemLabel="#{warranty.warrantedItemDescription}"
                                               itemValue="#{warranty}" />
                            </p:selectOneMenu>
                        </div>
                    </h:panelGroup>

                    <!-- Create Warranty Item Form -->
                    <h:panelGroup rendered="#{contractsController.createNewWarrantyId}" class="field col-12">
                        <p:panel header="New Warranty Record" styleClass="mb-3 p-3">
                            <div class="ui-fluid formgrid grid" style="margin: 2% 4%">

                                <!-- Warranted Item Description-->
                                <div class="field col-12">
                                    <p:outputLabel for="warrantedItemDescription" value="Description:" />
                                    <p:inputTextarea id="warrantedItemDescription" value="#{contractsController.warrantedItemDescription}" autoResize="true" />
                                </div>

                                <!-- Manufacturer Model -->
                                <div class="field col-12">
                                    <p:outputLabel for="manufacturerModel" value="Manufacturer Model:" />
                                    <p:inputText id="manufacturerModel" value="#{contractsController.manufacturerModel}" />
                                </div>

                                <!-- Serial Number -->
                                <div class="field col-12">
                                    <p:outputLabel for="serialNumber" value="Serial Number:" />
                                    <p:inputText id="serialNumber" value="#{contractsController.serialNumber}" />
                                </div>

                                <!-- Warranty Type -->
                                    <div class="field col-12">
                                        <p:outputLabel for="warrantyType" value="Warranty Type:" />
                                        <p:selectOneMenu id="warrantyType"
                                                         value="#{contractsController.warrantyType}">
                                            <f:selectItem itemLabel="-- Select Warranty Type --" itemValue="#{null}" />
                                            <f:selectItems value="#{warrantiesTableController.warrantyTypes}"
                                                           var="warranty"
                                                           itemValue="#{warranty}"
                                                           itemLabel="#{warranty}" />
                                        </p:selectOneMenu>
                                    </div>
                                <!-- Provider Party ID -->
                                <div class="field col-12">
                                    <p:outputLabel for="warrantyProviderPartyId" value="Provider Party ID:" />
                                    <p:inputText id="warrantyProviderPartyId" value="#{contractsController.warrantyProviderPartyId}" />
                                </div>

                                <!-- Start Date -->
                                <div class="field col-12 md:col-6">
                                    <p:outputLabel for="startDate" value="Start Date:" />
                                    <p:datePicker id="startDate"
                                                  value="#{contractsController.startDate}"
                                                  pattern="MM/dd/yyyy"
                                                  showIcon="true"
                                                  placeholder="Select date"
                                                  monthNavigator="true"
                                                  yearNavigator="true"
                                                  styleClass="w-full"  />
                                </div>

                                <!-- End Date -->
                                <div class="field col-12 md:col-6">
                                    <p:outputLabel for="endDate" value="End Date:" />
                                    <p:datePicker id="endDate"
                                                  value="#{contractsController.endDate}"
                                                  pattern="MM/dd/yyyy"
                                                  showIcon="true"
                                                  placeholder="Select date"
                                                  monthNavigator="true"
                                                  yearNavigator="true"
                                                  styleClass="w-full" >
                                    </p:datePicker>
                                </div>

                                <!-- Coverage Scope Text -->
                                <div class="field col-12">
                                    <p:outputLabel for="coverageScopeText1" value="Coverage Scope:" />
                                    <p:inputTextarea id="coverageScopeText1" value="#{contractsController.coverageScopeText}" autoResize="true" />
                                </div>

                                <!-- ExclusionsText -->
                                <div class="field col-12">
                                    <p:outputLabel for="exclusionsText1" value="Exclusions:" />
                                    <p:inputTextarea id="exclusionsText1" value="#{contractsController.exclusionsText}" autoResize="true" />
                                </div>

                                <!-- Is Active? -->
                                <div class="field col-12 md:col-6">
                                    <p:outputLabel for="isActive" value="Is Active?"  style="margin-right: 2%"/>
                                    <p:selectBooleanCheckbox id="isActive" value="#{contractsController.active}" />
                                </div>

                                <!-- Is Voided? -->
                                <div class="field col-12 md:col-6">
                                    <p:outputLabel for="isVoided" value="Is Voided?" style="margin-right: 2%" />
                                    <p:selectBooleanCheckbox id="isVoided" value="#{contractsController.voided}" />
                                </div>

                                <!-- Void Reason -->
                                <div class="field col-12">
                                    <p:outputLabel for="voidReason1" value="Void Reason:" />
                                    <p:inputText id="voidReason1" value="#{contractsController.voidReason}" />
                                </div>
                            </div>
                        </p:panel>
                    </h:panelGroup>
                    </h:panelGroup>

                </div>
            </p:panel>
<p:separator/>
            <p:panel header="Create Penalty">
                <div class="ui-fluid formgrid grid" style="margin: 2% 4%">
                    
                    <!-- Breach Type -->
                    <div class="field col-12">
                        <h:outputLabel for="breachType" value="Breach Type"/>
                        <p:inputText id="breachType" value="#{contractsController.breachType}"/>
                    </div>

                    <!-- Description -->
                    <div class="field col-12">
                        <h:outputLabel for="penalityDescription" value="Description"/>
                        <p:inputTextarea id="penalityDescription" value="#{contractsController.penalitiesDescription}"/>
                    </div>

                    <!-- Incurred Date -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="incurredDate" value="Incurred Date"/>
                        <p:datePicker id="incurredDate"
                                      value="#{contractsController.incurredDate}"
                                      pattern="yyyy-MM-dd"
                                      placeholder="Select date"
                                      showIcon="true"
                                      monthNavigator="true"
                                      yearNavigator="true"
                                      styleClass="w-full">
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </p:datePicker>
                    </div>

                    <!-- Penalty Amount -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="penaltyAmount" value="Penalty Amount"/>
                        <p:inputNumber id="penaltyAmount" value="#{contractsController.penaltyAmount}"/>
                    </div>

                    <!-- Currency -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="currency" value="Currency"/>
                        <p:inputText id="currency" value="#{contractsController.currency}"/>
                    </div>

                    <!-- Related Clause Ref -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="relatedClauseRef" value="Related Clause Ref"/>
                        <p:inputText id="relatedClauseRef" value="#{contractsController.relatedClauseRef}"/>
                    </div>

                    <!-- Grace Period Days Applied -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="gracePeriod" value="Grace Period Days Applied"/>
                        <p:inputNumber id="gracePeriod" value="#{contractsController.gracePeriodDaysApplied}" />
                    </div>

                    <!-- Status -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="penaltiesStatus" value="Status"/>
                        <p:selectOneMenu id="penaltiesStatus"
                                         value="#{contractsController.penalitiesStatus}">
                            <f:selectItem itemLabel="-- Select Contract --" itemValue="#{null}" />
                            <f:selectItems value="#{penaltiesController.penaltiesStatus}"
                                           var="status"
                                           itemValue="#{status}"
                                           itemLabel="#{status}" />
                        </p:selectOneMenu>
                    </div>

                    <!-- Resolution Date -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="penalitiesResolutionDate" value="Resolution Date"/>
                        <p:datePicker id="penalitiesResolutionDate"
                                      value="#{contractsController.penalitiesResolutionDate}"
                                      pattern="yyyy-MM-dd"
                                      placeholder="Select date"
                                      showIcon="true"
                                      monthNavigator="true"
                                      yearNavigator="true"
                                      styleClass="w-full">
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </p:datePicker>
                    </div>

                    <!-- Resolved By User Id -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="resolvedByUserId" value="Resolved By User ID"/>
                        <p:inputText id="resolvedByUserId" value="#{contractsController.resolvedByUserId}"/>
                    </div>

                    <!-- Notes -->
                    <div class="field col-12">
                        <h:outputLabel for="notes1" value="Notes"/>
                        <p:inputTextarea id="notes1" value="#{contractsController.notes}"/>
                    </div>

                    <!-- Proof Document Id -->
                    <div class="field col-12">
                        <h:outputLabel for="proofDocumentId" value="Proof Document ID"/>
                        <p:inputText id="proofDocumentId" value="#{contractsController.proofDocumentId}"/>
                    </div>

                </div>
            </p:panel>
            <p:panel header="New Rebate/Discount Entry" styleClass="ui-panelgrid-blank">
                <div class="ui-fluid formgrid grid" style="margin: 2% 4%">

                    <!-- Rebate Type -->
                    <div class="field col-12">
                        <h:outputLabel for="rebateType" value="Rebate Type:" />
                        <p:selectOneMenu id="rebateType"
                                         value="#{contractsController.rebateType}">
                            <f:selectItem itemLabel="-- Select Rebate Type --" itemValue="#{null}" />
                            <f:selectItems value="#{rebatesDiscountsTableController.rebateType}"
                                           var="RebateType"
                                           itemValue="#{RebateType}"
                                           itemLabel="#{RebateType}" />
                        </p:selectOneMenu>
                    </div>

                    <!-- Calculation Basis -->
                    <div class="field col-12">
                        <h:outputLabel for="calculationBasis" value="Calculation Basis:" />
                        <p:selectOneMenu id="calculationBasis"
                                         value="#{contractsController.calculationBasis}">
                            <f:selectItem itemLabel="-- Select calculation Basis --" itemValue="#{null}" />
                            <f:selectItems value="#{rebatesDiscountsTableController.calculationBasis}"
                                           var="calculationBasis"
                                           itemValue="#{calculationBasis}"
                                           itemLabel="#{calculationBasis}" />
                        </p:selectOneMenu>
                    </div>

                    <!-- Value Parameter -->
                    <div class="field col-12">
                        <h:outputLabel for="valueParam" value="Value Parameter:" />
                        <p:inputText id="valueParam" value="#{contractsController.valueParam}" />
                    </div>

                    <!-- Description -->
                    <div class="field col-12">
                        <h:outputLabel for="rebateDescription" value="Description:" />
                        <p:inputTextarea id="rebateDescription" value="#{contractsController.rebateDescription}" rows="3" />
                    </div>

                    <!-- Condition Text -->
                    <div class="field col-12">
                        <h:outputLabel for="conditionText1" value="Condition Text:" />
                        <p:inputTextarea id="conditionText1" value="#{contractsController.conditionText}" rows="3" />
                    </div>

                    <!-- Tracking Metric Type -->
                    <div class="field col-12">
                        <h:outputLabel for="trackingMetricType" value="Tracking Metric Type:" />
                        <p:selectOneMenu id="trackingMetricType"
                                         value="#{contractsController.trackingMetricType}">
                            <f:selectItem itemLabel="-- Select Tracking Metric Type --" itemValue="#{null}" />
                            <f:selectItems value="#{rebatesDiscountsTableController.trackingMetricType}"
                                           var="trackingMetricType"
                                           itemValue="#{trackingMetricType}"
                                           itemLabel="#{trackingMetricType}" />
                        </p:selectOneMenu>
                    </div>

                    <!-- Target Value Metric -->
                    <div class="field col-12">
                        <h:outputLabel for="targetValueMetric" value="Target Value Metric:" />
                        <p:inputText id="targetValueMetric" value="#{contractsController.targetValueMetric}" />
                    </div>

                    <!-- Current Value Metric -->
                    <div class="field col-12">
                        <h:outputLabel for="currentValueMetric" value="Current Value Metric:" />
                        <p:inputText id="currentValueMetric" value="#{contractsController.currentValueMetric}" />
                    </div>

                    <!-- Start Date -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="rebateStartDate" value="Start Date:" />
                        <p:datePicker id="rebateStartDate"
                                      value="#{contractsController.rebateStartDate}"
                                      pattern="yyyy-MM-dd"
                                      placeholder="Select date"
                                      showIcon="true"
                                      monthNavigator="true"
                                      yearNavigator="true"
                                      styleClass="w-full">
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </p:datePicker>
                    </div>

                    <!-- End Date -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="rebateEndDate" value="End Date:" />
                        <p:calendar id="rebateEndDate" value="#{contractsController.rebateEndDate}" pattern="MM/dd/yyyy" showIcon="true"/>
                        <p:datePicker id="rebateResolutionDate"
                                      value="#{contractsController.endDate}"
                                      pattern="yyyy-MM-dd"
                                      placeholder="Select date"
                                      showIcon="true"
                                      monthNavigator="true"
                                      yearNavigator="true"
                                      styleClass="w-full">
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </p:datePicker>
                    </div>

                    <!-- Estimated Rebate Amount -->
                    <div class="field col-12">
                        <h:outputLabel for="estimatedRebateAmount" value="Estimated Rebate Amount:" />
                        <p:inputNumber id="estimatedRebateAmount" value="#{contractsController.estimatedRebateAmount}" />
                    </div>

                    <!-- Actual Rebate Amount -->
                    <div class="field col-12">
                        <h:outputLabel for="actualRebateAmount" value="Actual Rebate Amount:" />
                        <p:inputNumber id="actualRebateAmount" value="#{contractsController.actualRebateAmount}" />
                    </div>

                    <!-- Status -->
                    <div class="field col-12">
                        <h:outputLabel for="status" value="Status:" />
                        <p:selectOneMenu id="rebateStatus"
                                         value="#{contractsController.rebateStatus}">
                            <f:selectItem itemLabel="-- Select Status --" itemValue="#{null}" />
                            <f:selectItems value="#{rebatesDiscountsTableController.rebateStatus}"
                                           var="status"
                                           itemValue="#{status}"
                                           itemLabel="#{status}" />
                        </p:selectOneMenu>
                    </div>

                    <!-- Applied To Payment ID -->
                    <div class="field col-12">
                        <h:outputLabel for="appliedToPaymentId" value="Applied To Payment ID:" />
                        <p:inputText id="appliedToPaymentId" value="#{contractsController.appliedToPaymentId}" />
                    </div>
                </div>
            </p:panel>
        <p:panel header="New Payment Frequency" styleClass="ui-panelgrid-blank">
            <div class="ui-fluid formgrid grid" style="margin: 2% 4%">

                <!-- Frequency Name -->
                <div class="field col-12">
                    <h:outputLabel for="frequencyName" value="Frequency Name:" />
                    <p:inputText id="frequencyName" value="#{paymentFrequenciesTableController.selected.frequencyName}" label="Frequency Name" />
                </div>

            </div>
    </p:panel>
            <p:panel header="Create New Retention Record" styleClass="ui-panel ui-widget-content">
                <div class="ui-fluid formgrid grid" style="margin: 2% 4%">

                    <!-- Retention Reason -->
                    <div class="field col-12">
                        <h:outputLabel for="retentionReason" value="Retention Reason:"/>
                        <p:inputText id="retentionReason" value="#{contractsController.retentionReason}" />
                    </div>

                    <!-- Retained Percentage Applied -->
                    <div class="field col-12">
                        <h:outputLabel for="retainedPercentageApplied" value="Retained Percentage Applied:"/>
                        <p:inputNumber id="retainedPercentageApplied" value="#{contractsController.retainedPercentageApplied}" />
                    </div>

                    <!-- Initial Retained Amount -->
                    <div class="field col-12">
                        <h:outputLabel for="initialRetainedAmount" value="Initial Retained Amount:"/>
                        <p:inputNumber id="initialRetainedAmount" value="#{contractsController.initialRetainedAmount}" />
                    </div>

                    <!-- Currency -->
                    <div class="field col-12">
                        <h:outputLabel for="retentionCurrency" value="Currency:"/>
                        <p:selectOneMenu id="retentionCurrency"
                                         value="#{contractsController.retentionCurrency}"
                                         styleClass="w-full">
                            <f:selectItem itemLabel="Select" itemValue="" noSelectionOption="true" />
                            <f:selectItem itemLabel="ETB" itemValue="ETB" />
                            <f:selectItem itemLabel="USD" itemValue="USD" />
                            <f:selectItem itemLabel="EUR" itemValue="EUR" />
                        </p:selectOneMenu>
                    </div>

                    <!-- Amount Released So Far -->
                    <div class="field col-12">
                        <h:outputLabel for="amountReleasedSoFar" value="Amount Released So Far:"/>
                        <p:inputText id="amountReleasedSoFar" value="#{contractsController.amountReleasedSoFar}"/>
                    </div>

                    <!-- Status -->
                    <div class="field col-12">
                        <h:outputLabel for="retentionStatus" value="Status:"/>
                        <p:selectOneMenu id="retentionStatus" value="#{contractsController.retentionStatus}">
                            <f:selectItem itemLabel="-- Select Status --" itemValue="#{null}" />
                            <f:selectItems value="#{retentionsTableController.status}"
                                           var="status"
                                           itemValue="#{status}"
                                           itemLabel="#{status}" />
                        </p:selectOneMenu>
                    </div>

                    <!-- Release Condition Description -->
                    <div class="field col-12">
                        <h:outputLabel for="releaseConditionDescription1" value="Release Condition:"/>
                        <p:inputText id="releaseConditionDescription1" value="#{contractsController.releaseConditionDescription}"/>
                    </div>

                    <!-- Scheduled Release Date -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="scheduledReleaseDate" value="Scheduled Release Date:"/>
                        <p:datePicker id="scheduledReleaseDate"
                                      value="#{contractsController.scheduledReleaseDate}"
                                      pattern="yyyy-MM-dd"
                                      placeholder="Select date"
                                      showIcon="true"
                                      monthNavigator="true"
                                      yearNavigator="true"
                                      styleClass="w-full">
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </p:datePicker>
                    </div>

                    <!-- Actual First Release Date -->
                    <div class="field col-12 md:col-6">
                        <h:outputLabel for="actualFirstReleaseDate" value="Actual First Release Date:"/>
                        <p:datePicker id="actualFirstReleaseDate"
                                      value="#{contractsController.actualFirstReleaseDate}"
                                      pattern="yyyy-MM-dd"
                                      placeholder="Select date"
                                      showIcon="true"
                                      monthNavigator="true"
                                      yearNavigator="true"
                                      styleClass="w-full">
                            <f:convertDateTime pattern="yyyy-MM-dd" />
                        </p:datePicker>
                    </div>

                    <!-- Notes -->
                    <div class="field col-12">
                        <h:outputLabel for="notes2" value="Notes:"/>
                        <p:inputTextarea id="notes2" value="#{contractsController.retentionNotes}" rows="3"/>
                    </div>

                </div>
            </p:panel>
        </h:form>
    </ui:define>
</ui:composition>
